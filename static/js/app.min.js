(function(e,t){function n(){var r=t.getElementsByClassName("lazy-load");if(0===r.length)e.removeEventListener("load",n),e.removeEventListener("scroll",n),e.removeEventListener("resize",n);else for(var s=r.length-1;s>-1;s--){var i=r[s];a(i,300)&&(i.src=i.getAttribute("data-src"),i.removeAttribute("data-src"),i.classList.remove("lazy-load"))}}function a(n,a){return n.offsetTop-((t.scrollingElement||t.documentElement).scrollTop+(e.innerHeight||t.documentElement.clientHeight))<a}var r=function(e){return t.getElementById(e)},s=function(e){e=e||document;var t=e.defaultView||e.parentWindow,n=e.compatMode,a=e.documentElement,r=t.innerHeight||0,s=t.innerWidth||0,i=t.pageXOffset||0,l=t.pageYOffset||0,o=a.scrollWidth,d=a.scrollHeight;return"CSS1Compat"!==n&&(a=e.body,o=a.scrollWidth,d=a.scrollHeight),n&&(s=a.clientWidth,r=a.clientHeight),o=Math.max(o,s),d=Math.max(d,r),i=Math.max(i,e.documentElement.scrollLeft,e.body.scrollLeft),l=Math.max(l,e.documentElement.scrollTop,e.body.scrollTop),{width:s,height:r,scrollWidth:o,scrollHeight:d,scrollX:i,scrollY:l}},i=function(e){var t=e.ownerDocument,n=s(t),a=n.scrollX,r=n.scrollY,i=e.getBoundingClientRect(),l=[i.left,i.top];return(r||a)&&(l[0]+=a,l[1]+=r),l},l=function(e){var t=i(e),n=t[0],a=t[1],r=e.offsetWidth,s=e.offsetHeight;return{width:r,height:s,left:n,top:a,bottom:a+s,right:n+r}},o=function(){var e=r("comments");if(e)if(location.hash.indexOf("#comments")>-1)d();else var t=setInterval(function(){var n=s(),a=n.scrollY+n.height,r=l(e).top;Math.abs(r-a)<1e3&&(d(),clearInterval(t))},300)},d=function(){var e=r("gitalk-container");if(e){var n=e.getAttribute("data-config"),a=e.getAttribute("data-identifier");n&&(n=JSON.parse(n)),n.id=a;var s=t.createElement("link");s.setAttribute("rel","stylesheet"),s.setAttribute("type","text/css"),s.setAttribute("href","//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.css"),(t.head||t.body).appendChild(s);var i=t.createElement("script");i.src="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js",i.onload=function(){var e=new Gitalk(n);e.render("gitalk-container")},(t.head||t.body).appendChild(i)}};e.addEventListener("load",function(){o()});var c={isMob:function(){for(var e=navigator.userAgent.toLowerCase(),t=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],n=!1,a=0;a<t.length;a++)e.indexOf(t[a].toLowerCase())>-1&&(n=!0);return n}()};c.isMob?t.documentElement.className+=" mob":t.documentElement.className+=" pc";var m={$sidebar:t.querySelector("#sidebar"),$main:t.querySelector("#main"),$sidebar_mask:t.querySelector("#sidebar-mask"),$body:t.body,$btn_side:t.querySelector("#header .btn-bar"),$article:t.querySelectorAll(".mob #page-index article"),bindEvent:function(){var t=this,n="side",a="click",r="click";c.isMob&&(a="touchstart",r="touchend"),this.$btn_side.addEventListener(r,function(){t.$body.className.indexOf(n)>-1?(t.$body.className=t.$body.className.replace(n,""),t.$sidebar_mask.style.display="none"):(t.$body.className+=" "+n,t.$sidebar_mask.style.display="block")},!1),this.$sidebar_mask.addEventListener(a,function(e){t.$body.className=t.$body.className.replace(n,""),t.$sidebar_mask.style.display="none",e.preventDefault()},!1),e.addEventListener("resize",function(){t.$body.className=t.$body.className.replace(n,""),t.$sidebar_mask.style.display="none"},!1)}};m.bindEvent(),e.addEventListener("load",n),e.addEventListener("scroll",n),e.addEventListener("resize",n);var u={$code:t.querySelectorAll("pre code"),hasClass:function(e,t){return e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))},addClass:function(e,t){u.hasClass(e,t)||(e.className+=" "+t)},removeClass:function(e,t){u.hasClass(e,t)&&(e.className=e.className.replace(new RegExp("(\\s|^)"+t+"(\\s|$)")," "))},stringHash:function(e){var t="";return e.index>1&&(t+=e.index+"-"),t+="L"+e.start,e.end&&e.end>e.start&&(t+="-L"+e.end),t},parseHash:function(){var e=location.hash.substr(1).match(/((\d+)-)?L(\d+)(-L(\d+))?/);return e?{index:parseInt(e[2],10)||1,start:parseInt(e[3],10)||1,end:parseInt(e[5],10)||parseInt(e[3],10)||1}:null},mark:function(e){var t=u.parseHash();if(t&&u.$code&&u.$code[t.index-1]){for(var n=u.$code[t.index-1].querySelectorAll("li"),a=t.start-1;a<t.end;a++)n[a]&&u.addClass(n[a],"mark");e&&n&&n[0]&&setTimeout(function(){window.scrollTo(0,l(n[0]).top-50)})}},removeMark:function(){[].slice.call(t.querySelectorAll("pre code li.mark")).forEach(function(e){u.removeClass(e,"mark")})},init:function(){[].slice.call(u.$code).forEach(function(e,t){var n=e.innerHTML.split(/\n/).slice(0,-1),a=n.map(function(e,t){return'<li><span class="line-num" data-line="'+(t+1)+'"></span>'+e+"</li>"}).join("");a="<ul>"+a+"</ul>",n.length>3&&e.className.match(/lang-(\w+)/)&&"undefined"!==RegExp.$1&&(a+='<b class="name">'+RegExp.$1+"</b>"),e.innerHTML=a,u.addClass(e,"app-code"),e.addEventListener("click",function(e){if(e.target&&u.hasClass(e.target,"line-num"))if(e.shiftKey){var n=u.parseHash();n.newIndex=t+1,n.current=e.target.getAttribute("data-line"),n.index!==n.newIndex-0?(n.index=n.newIndex,n.start=n.current,n.end=0):n.current>n.start?n.end=n.current:(n.end=n.start,n.start=n.current),location.hash=u.stringHash(n)}else location.hash=u.stringHash({index:t+1,start:e.target.getAttribute("data-line")})})})}};u.init(),e.addEventListener("load",function(){u.mark(!0)}),e.addEventListener("hashchange",function(){u.removeMark(),u.mark()})})(window,document);